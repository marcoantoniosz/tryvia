(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{28:function(e,t,a){},34:function(e,t,a){e.exports=a(57)},39:function(e,t,a){},46:function(e,t,a){},51:function(e,t){},52:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(20),c=a.n(s),o=(a(39),a(12)),i=a(14),l=(a(28),a(2)),u=a(3),m=a.n(u),p=a(13),d=a(21),f=a(5),h=a(6),b=a(8),v=a(7),g=a(30),E=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://opentdb.com/api_token.php?command=request");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),y=function(){return function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:a=e.sent,t({type:"GET_TOKEN_SUCCESS",payload:a.token});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=(a(46),function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(f.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(d.a)({},n,r),(function(){return e.validadeButton()}))},e.validateEmail=function(e){return/\S+@\S+\.\S+/.test(e)},e.validadeButton=function(){var t=e.state,a=t.name,n=t.email;a.length>0&&e.validateEmail(n)?e.setState({isDisabled:!1}):e.setState({isDisabled:!0})},e.clickButton=function(){var t=Object(p.a)(m.a.mark((function t(a){var n,r,s,c,o,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state,r=n.name,s=n.email,c=e.props,o=c.getTokenProp,(0,c.savePlayerDataProp)({name:r,assertions:0,score:0,gravatarEmail:s}),t.next=6,o();case 6:i=e.props.token,localStorage.setItem("token",i),e.setState({toGameScreen:!0});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleSettings=function(){e.props.history.push("/settings")},e.state={name:"",email:"",isDisabled:!0,toGameScreen:!1},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.email,n=e.isDisabled,s=e.toGameScreen;return r.a.createElement("div",null,r.a.createElement("form",{className:"Form_Login"},r.a.createElement("h3",{className:"Login_Title"}," Trivia "),r.a.createElement("input",{className:"Login_Input",type:"text",name:"name",value:t,placeholder:"Nome","data-testid":"input-player-name",onChange:this.handleChange}),r.a.createElement("input",{className:"Login_Input",type:"email",name:"email",value:a,placeholder:"Email","data-testid":"input-gravatar-email",onChange:this.handleChange}),r.a.createElement("button",{className:"Login_Button",type:"submit",disabled:n,"data-testid":"btn-play",onClick:this.clickButton},"Play"),s&&r.a.createElement(g.Redirect,{to:"/game"}),r.a.createElement("button",{className:"Login_Button",type:"button","data-testid":"btn-settings",onClick:this.handleSettings},"Settings")))}}]),a}(n.Component)),O=Object(o.b)((function(e){return{token:e.token}}),(function(e){return{getTokenProp:function(){return e(y())},savePlayerDataProp:function(t){return e(function(e){return{type:"PLAYER_DATA",payload:e}}(t))}}}))(k),w=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement("h1",{"data-testid":"settings-title"},"Trivia"))}}]),a}(r.a.Component),S=a(22),j=a.n(S),x=(a(52),function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.player,t=e.name,a=e.gravatarEmail,n=e.score,s=j()(a).toString(),c="https://www.gravatar.com/avatar/".concat(s);return r.a.createElement("header",{className:"Header_Content"},r.a.createElement("img",{className:"Header_Image",src:c,alt:"gravatar_image","data-testid":"header-profile-picture"}),r.a.createElement("h1",{className:"Header_Title","data-testid":"header-player-name"},t),r.a.createElement("span",{className:"Header_Score"},"Placar:",r.a.createElement("span",{"data-testid":"header-score",className:"Header_Score"},n)))}}]),a}(n.Component)),N=Object(o.b)((function(e){return{player:e.player}}))(x),_=a(26),C=a(23),A=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://opentdb.com/api.php?amount=5&token=".concat(t));case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),P=(a(54),function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(f.a)(this,a),(e=t.call(this)).startTimer=function(){var t=setInterval((function(){e.setState((function(e){return{timer:e.timer-1}}));var a=e.state.timer;25===a&&e.setState({isDisabled:!1}),0===a&&(clearInterval(t),e.handleAnswer())}),1e3)},e.handleQuestions=Object(p.a)(m.a.mark((function t(){var a,n,r,s,c,o,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.index,n=e.props,r=n.token,s=n.getTokenProp,t.next=4,A(r);case 4:if(c=t.sent,o=c.response_code,i=c.results,3!==o&&""!==r){t.next=11;break}return t.next=10,s();case 10:return t.abrupt("return",e.handleQuestions());case 11:e.setState({results:i,question:i[a]},localStorage.setItem("token",r)),e.getOptions();case 13:case"end":return t.stop()}}),t)}))),e.getOptions=function(){var t=e.state.question,a=[t.correct_answer].concat(Object(_.a)(t.incorrect_answers)),n=e.shuffleArray(a);e.setState({shuffleOptions:n})},e.handleClick=function(){var t=e.state,a=t.results,n=t.index;(e.setState((function(e){return{index:e.index+1,wrongAs:"",rightAs:"",nextEnable:!1}})),4===n)&&(0,e.props.push)("/feedback");e.setState({question:a[n+1],timer:30,isDisabled:!0},(function(){return e.getOptions()})),e.startTimer()},e.shuffleArray=function(e){for(var t=e.length-1;t>0;t-=1){var a=Math.floor(Math.random()*(t+1)),n=[e[a],e[t]];e[t]=n[0],e[a]=n[1]}return e},e.verifyAnswer=function(e,t,a){return e===t?"correct-answer":(a.forEach((function(e,a){e===t&&(n=a)})),"wrong-answer-".concat(n));var n},e.handleAnswer=function(){e.setState({wrongAs:"3px solid rgb(255, 0, 0)",rightAs:"3px solid rgb(6, 240, 15)",nextEnable:!0,isDisabled:!0})},e.getPoints=function(t,a){var n;switch(t){case"easy":n=10+1*a;break;case"medium":n=10+2*a;break;case"hard":n=10+3*a}var r=e.props,s=r.name,c=r.saveScoreProp,o=JSON.parse(localStorage.getItem("ranking")),i=o.findIndex((function(e){return e.name===s}));o[i].score+=n,c(o[i].score),localStorage.setItem("ranking",JSON.stringify(o))},e.handleClickAnswer=function(t,a){var n=e.props.correctAnswerProp;if(e.handleAnswer(),t.target.value===a){n();var r=e.state,s=r.timer,c=r.question;e.getPoints(c.difficulty,s)}e.setState({timer:1})},e.styleChange=function(t,a){var n=e.state,r=n.wrongAs,s=n.rightAs;return t===a?{border:s}:{border:r}},e.state={results:[],index:0,wrongAs:"",rightAs:"",timer:30,question:{},shuffleOptions:[],nextEnable:!1,isDisabled:!0},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n,r,s,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleQuestions();case 2:this.startTimer(),t=this.props,a=t.gravatarEmail,n=t.name,r=j()(a).toString(),s="https://www.gravatar.com/avatar/".concat(r),(c=JSON.parse(localStorage.getItem("ranking")))?(o=c.findIndex((function(e){return e.name===n})))>=0?(c[o].score=0,localStorage.setItem("ranking",JSON.stringify(c))):localStorage.setItem("ranking",JSON.stringify([].concat(Object(_.a)(c),[{name:n,score:0,picture:s}]))):localStorage.setItem("ranking",JSON.stringify([{name:n,score:0,picture:s}]));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=r.a.createElement("button",{className:"Next_Button",type:"button","data-testid":"btn-next",onClick:this.handleClick},"Pr\xf3xima"),a=this.state,n=a.question,s=a.shuffleOptions,c=a.timer,o=a.nextEnable,i=a.isDisabled;return Object.keys(n).length>0?r.a.createElement("div",null,r.a.createElement("span",{className:"Timer"},c),r.a.createElement("h2",{"data-testid":"question-category",className:"Category"},Object(C.decode)(n.category)),r.a.createElement("p",{"data-testid":"question-text",className:"Question"},Object(C.decode)(n.question)),r.a.createElement("div",{"data-testid":"answer-options"},s.map((function(t,a){return r.a.createElement("button",{className:"Options_Button",value:t,key:a,type:"button",style:e.styleChange(t,n.correct_answer),onClick:function(t){return e.handleClickAnswer(t,n.correct_answer)},"data-testid":e.verifyAnswer(n.correct_answer,t,n.incorrect_answers),disabled:i},Object(C.decode)(t))}))),o&&t):r.a.createElement("div",null," Loading ")}}]),a}(n.Component)),T=Object(o.b)((function(e){var t=e.token,a=e.player;return{token:t,name:a.name,gravatarEmail:a.gravatarEmail}}),(function(e){return{getTokenProp:function(){return e(y())},saveScoreProp:function(t){return e(function(e){return{type:"SAVE_SCORE",payload:e}}(t))},correctAnswerProp:function(){return e({type:"CORRECT_ANSWER"})}}}))(P),D=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.history.push;return r.a.createElement("div",null,r.a.createElement(N,null),r.a.createElement(T,{push:e}))}}]),a}(n.Component),R=(a(55),function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props,t=e.assertions,a=e.score;return r.a.createElement("div",null,r.a.createElement(N,null),r.a.createElement("span",{"data-testid":"feedback-text",className:"text main"},t<3?"Could be better...":"Well Done!"),r.a.createElement("br",null),r.a.createElement("p",{className:"text"},"Pontos:"," ",r.a.createElement("span",{"data-testid":"feedback-total-score",className:"text"},a)),r.a.createElement("p",{className:"text"},"Total de Acertos:"," ",r.a.createElement("span",{"data-testid":"feedback-total-question",className:"text"},t)),r.a.createElement(i.b,{to:"/"},r.a.createElement("button",{"data-testid":"btn-play-again",type:"button",className:"Play_Button"},"Play Again")),r.a.createElement("br",null),r.a.createElement(i.b,{to:"/ranking"},r.a.createElement("button",{"data-testid":"btn-ranking",type:"button",className:"Ranking_Button"},"Ver Ranking")))}}]),a}(n.Component)),I=Object(o.b)((function(e){return{assertions:e.player.assertions,score:e.player.score}}))(R),B=(a(56),function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(f.a)(this,a),(e=t.call(this)).getData=function(){var t=JSON.parse(localStorage.getItem("ranking")),a=t.sort((function(e,t){return t.score-e.score}));if(console.log(a),a)return e.setState({dados:t})},e.state={dados:[]},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.state.dados;return 0===e.lenght?r.a.createElement("div",null,"Nenhum dado dispon\xedvel"):r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("h1",{className:"ranking_title","data-testid":"ranking-title"},"Ranking")),r.a.createElement("div",{className:"rank_content"},e.map((function(e,t){var a=e.name,n=e.picture,s=e.score;return r.a.createElement("div",{key:t,className:"player_card"},r.a.createElement("img",{src:n,alt:a,className:"player_image"}),r.a.createElement("h2",{className:"ranking_subtitle","data-testid":"player-name-".concat(t)},a),r.a.createElement("h2",{className:"ranking_subtitle","data-testid":"player-score-".concat(t)},s))}))),r.a.createElement(i.b,{to:"/"},r.a.createElement("button",{"data-testid":"btn-go-home",type:"button",className:"Home_Button"},"Play Again")))}}]),a}(n.Component)),q=Object(o.b)()(B);function J(){return r.a.createElement("div",{className:"App"},r.a.createElement(l.Switch,null,r.a.createElement(l.Route,{exact:!0,path:"/",component:O}),r.a.createElement(l.Route,{exact:!0,path:"/settings",component:w}),r.a.createElement(l.Route,{exact:!0,path:"/game",component:D}),r.a.createElement(l.Route,{exact:!0,path:"/feedback",component:I}),r.a.createElement(l.Route,{exact:!0,path:"/ranking",component:q})))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=a(16),H=a(33),W=a(32),G=a(19),M={name:"",assertions:0,score:0,gravatarEmail:""};var Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PLAYER_DATA":return t.payload;case"SAVE_SCORE":return Object(G.a)(Object(G.a)({},e),{},{score:t.payload});case"CORRECT_ANSWER":return Object(G.a)(Object(G.a)({},e),{},{assertions:e.assertions+1});default:return e}};var V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TOKEN_SUCCESS":return t.payload;default:return e}},K=Object(L.combineReducers)({player:Q,token:V}),U=Object(L.createStore)(K,Object(W.composeWithDevTools)(Object(L.applyMiddleware)(H.a)));window.Cypress&&(window.store=U);var Y=U;c.a.render(r.a.createElement(i.a,{basename:"/tryvia"},r.a.createElement(o.a,{store:Y},r.a.createElement(J,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[34,1,2]]]);
//# sourceMappingURL=main.95453c03.chunk.js.map